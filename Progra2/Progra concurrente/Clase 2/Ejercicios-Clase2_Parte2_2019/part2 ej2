programa Mensaje 
procesos
  proceso contarF(ES flores: numero)
  variables
    aux : numero
  comenzar
    aux := 0
    mientras (HayFlorEnLaEsquina)
      tomarFlor
      aux := aux + 1
    repetir aux
      depositarFlor
    flores := flores + aux
  fin
areas
  ciudad1 : AreaP(2,2,4,6)
  ciudad1a : AreaP(12,10,14,14)
  ciudad2 : AreaP(6,2,8,6)
  ciudad2a : AreaP(16,10,18,14)
  ciudad3 : AreaP(10,2,12,6)
  ciudad3a : AreaP(20,10,22,14)
  ciudad4 : AreaP(14,2,16,6)
  ciudad4a : AreaP(24,10,26,14)
  areajefe: AreaP(1,1,1,1)
robots 
  robot tipo1
  variables
    flores : numero
    Av : numero
    Ca : numero
  comenzar
    RecibirMensaje(Av, robotjefe)
    RecibirMensaje(Ca, robotjefe)
    Pos(Av, Ca)
    repetir 2
      repetir 4
        contarF(flores)
        mover
      derecha
      repetir 2
        contarF(flores)
        mover
      derecha
    EnviarMensaje(flores, robotjefe)
  fin
  robot tipo2
  variables
    cuenta : numero
    aux : numero
  comenzar
    cuenta:=0
    EnviarMensaje(12, robot1)
    EnviarMensaje(10, robot1)
    EnviarMensaje(16, robot2)
    EnviarMensaje(10, robot2)
    EnviarMensaje(20, robot3)
    EnviarMensaje(10, robot3)
    EnviarMensaje(24, robot4)
    EnviarMensaje(10, robot4)
    RecibirMensaje(aux, *)
    cuenta:= cuenta+aux
    RecibirMensaje(aux, *)
    cuenta:= cuenta+aux
    RecibirMensaje(aux, *)
    cuenta:= cuenta+aux
    RecibirMensaje(aux, *)
    cuenta:= cuenta+aux
    Informar(cuenta)
  fin
variables 
  robot1: tipo1
  robot2: tipo1
  robot3: tipo1
  robot4: tipo1
  robotjefe: tipo2
comenzar 
  AsignarArea(robot1,ciudad1)
  AsignarArea(robot1,ciudad1a)
  AsignarArea(robot2,ciudad2)
  AsignarArea(robot2,ciudad2a)
  AsignarArea(robot3,ciudad3)
  AsignarArea(robot3,ciudad3a)
  AsignarArea(robot4,ciudad4)
  AsignarArea(robot4,ciudad4a)
  AsignarArea(robotjefe,areajefe)
  Iniciar(robotjefe, 1, 1)
  Iniciar(robot1, 2, 2)
  Iniciar(robot2, 6, 2)
  Iniciar(robot3, 10, 2)
  Iniciar(robot4, 14, 2)
fin 
