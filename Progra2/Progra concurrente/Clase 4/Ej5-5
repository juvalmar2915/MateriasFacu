programa ej2clase3
areas
  areaR1: AreaP(9,9,9,9)
  areaR2: AreaP(11,9,11,9)
  areaR3: AreaP(9,11,9,11)
  areaR4: AreaP(11,11,11,11)
  areaC1: AreaC(10,10,10,10)
  areaR5: AreaP(1,1,1,1)
robots
  robot tipo1
  variables
    Cp:numero
    ca:numero
    av:numero
    haypapel:boolean
    papel:numero
  comenzar
    ca:=PosCa
    av:=PosAv
    papel:=0
    RecibirMensaje(haypapel,robotcoordinador)
    mientras haypapel
      BloquearEsquina(10,10)
      Pos(10,10)
      si HayPapelEnLaEsquina
        tomarPapel
        papel:=papel+1
      Pos(av,ca) 
      LiberarEsquina(10,10)
      RecibirMensaje(haypapel,robotcoordinador) 
    Informar(papel) 
  fin
  robot tipo2
  variables
    num:numero
    notermino:boolean
  comenzar
    BloquearEsquina(10,10)
    Pos(10,10)
    notermino:=HayPapelEnLaEsquina
    Pos(1,1)
    LiberarEsquina(10,10)
    mientras notermino
      Random(num,1,4)
      si(num=1)
        EnviarMensaje(notermino,robot1)
      si(num=2)
        EnviarMensaje(notermino,robot2)
      si(num=3)
        EnviarMensaje(notermino,robot3)
      si(num=4)
        EnviarMensaje(notermino,robot4)
      BloquearEsquina(10,10)
      Pos(10,10)
      notermino:=HayPapelEnLaEsquina
      Pos(1,1)
      LiberarEsquina(10,10)
    EnviarMensaje(notermino,robot1)
    EnviarMensaje(notermino,robot2)
    EnviarMensaje(notermino,robot3)
    EnviarMensaje(notermino,robot4)
  fin 
variables 
  robot1:tipo1 
  robot2:tipo1 
  robot3:tipo1
  robot4:tipo1
  robotcoordinador:tipo2
comenzar
  AsignarArea(robot1,areaR1)
  AsignarArea(robot2,areaR2)
  AsignarArea(robot3,areaR3)
  AsignarArea(robot4,areaR4)
  AsignarArea(robot1,areaC1)
  AsignarArea(robot2,areaC1)
  AsignarArea(robot3,areaC1)
  AsignarArea(robot4,areaC1)
  AsignarArea(robotcoordinador,areaC1)
  AsignarArea(robotcoordinador,areaR5)
  Iniciar(robotcoordinador,1,1)
  Iniciar(robot1,9,9)
  Iniciar(robot2,11,9)
  Iniciar(robot3,9,11)
  Iniciar(robot4,11,11)
fin