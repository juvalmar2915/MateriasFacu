PIC EQU 20H
HAND EQU 40H
N_HND EQU 10

ORG 40
IP_HND DW RUT_HND

ORG 1000H
CANT DB 5
CARAC DB ?

ORG 3000H
CARACTERES: PUSH BX
SIGO: INT 6
INC BX
DEC CL
JNZ SIGO
POP BX
RET

ORG 3500H
RUT_HND: PUSH AX
MOV AL, [BX]
OUT HAND, AL ; ENVIO CARACTER A IMPRIMIR
DEC CL
CMP CL, 5
JZ PASO
JNC SUMO
DEC BX
JMP PASO
SUMO: INC BX
PASO: MOV AL, 20H
OUT PIC, AL ; FIN ATENCION A LA INTERRUPCION
POP AX
IRET

ORG 2000H
MOV BX, OFFSET CARAC
MOV CL, CANT
CALL CARACTERES
MOV CL, 10
CLI
MOV AL, 0FBH ; ENMACARO TODO MENOS INT 2
OUT PIC+1, AL
MOV AL, N_HND
OUT PIC+6, AL ; ASIGNO A INT2 EL TIPO 10
MOV AL, 80H
OUT HAND+1, AL ; CONFIGURO HAND PARA INTERRUPCION
STI
LAZO: CMP CL,0
JNZ LAZO ; MIENTRAS TENGO CARACTERES PARA IMPRIMIR SIGO EN LAZO
IN AL, HAND+1
AND AL, 7FH
OUT HAND+1,AL ; DESABILITO INTERRUPCIONES
INT 0
END
