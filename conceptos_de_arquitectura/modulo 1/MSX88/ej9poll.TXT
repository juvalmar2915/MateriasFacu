HAND EQU 40H

ORG 1000H
CANT DB 5
CARAC DB ?

ORG 3000H
CARACTERES: PUSH BX
SIGO: INT 6
INC BX
DEC CL
JNZ SIGO
POP BX
RET

ORG 3500H
RUTINA_HND: PUSH AX
MOV AL, [BX]
OUT HAND, AL ; ENVIO CARACTER A IMPRIMIR
DEC CL
CMP CL, 5
JZ PASO
JNC NORESTO
DEC BX
JMP PASO
NORESTO: INC BX
PASO: POP AX
RET

ORG 2000H
MOV BX, OFFSET CARAC
MOV CL, CANT
CALL CARACTERES
MOV CL, 10 ; MUEVO 10 PARA HACE IMPRESION INVERSA
IN AL, HAND+1
AND AL, 7FH
OUT HAND+1, AL ; CONFIGURO HAND PARA POLL
POLL: IN AL, HAND+1
AND AL, 1 ; LEE BUSY Y ESPERA MIENTRAS LA IMPRESORA ESTE OCUPADA
JNZ POLL
CALL RUTINA_HND
CMP CL, 0
JNZ POLL
INT 0
END
